{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { EventEmitter, UnavailabilityError } from '@unimodules/core';\nimport { PermissionStatus } from 'expo-modules-core';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport MediaLibrary from \"./ExponentMediaLibrary\";\nvar eventEmitter = new EventEmitter(MediaLibrary);\nexport { PermissionStatus };\n\nfunction arrayize(item) {\n  if (Array.isArray(item)) {\n    return item;\n  }\n\n  return item ? [item] : [];\n}\n\nfunction getId(ref) {\n  if (typeof ref === 'string') {\n    return ref;\n  }\n\n  return ref ? ref.id : undefined;\n}\n\nfunction checkAssetIds(assetIds) {\n  if (assetIds.some(function (id) {\n    return !id || typeof id !== 'string';\n  })) {\n    throw new Error('Asset ID must be a string!');\n  }\n}\n\nfunction checkAlbumIds(albumIds) {\n  if (albumIds.some(function (id) {\n    return !id || typeof id !== 'string';\n  })) {\n    throw new Error('Album ID must be a string!');\n  }\n}\n\nfunction checkMediaType(mediaType) {\n  if (Object.values(MediaType).indexOf(mediaType) === -1) {\n    throw new Error(\"Invalid mediaType: \" + mediaType);\n  }\n}\n\nfunction checkSortBy(sortBy) {\n  if (Array.isArray(sortBy)) {\n    checkSortByKey(sortBy[0]);\n\n    if (typeof sortBy[1] !== 'boolean') {\n      throw new Error('Invalid sortBy array argument. Second item must be a boolean!');\n    }\n  } else {\n    checkSortByKey(sortBy);\n  }\n}\n\nfunction checkSortByKey(sortBy) {\n  if (Object.values(SortBy).indexOf(sortBy) === -1) {\n    throw new Error(\"Invalid sortBy key: \" + sortBy);\n  }\n}\n\nfunction dateToNumber(value) {\n  return value instanceof Date ? value.getTime() : value;\n}\n\nexport var MediaType = MediaLibrary.MediaType;\nexport var SortBy = MediaLibrary.SortBy;\nexport function requestPermissionsAsync() {\n  var writeOnly,\n      _args = arguments;\n  return _regeneratorRuntime.async(function requestPermissionsAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          writeOnly = _args.length > 0 && _args[0] !== undefined ? _args[0] : false;\n\n          if (MediaLibrary.requestPermissionsAsync) {\n            _context.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'requestPermissionsAsync');\n\n        case 3:\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(MediaLibrary.requestPermissionsAsync(writeOnly));\n\n        case 5:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getPermissionsAsync() {\n  var writeOnly,\n      _args2 = arguments;\n  return _regeneratorRuntime.async(function getPermissionsAsync$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          writeOnly = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : false;\n\n          if (MediaLibrary.getPermissionsAsync) {\n            _context2.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'getPermissionsAsync');\n\n        case 3:\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(MediaLibrary.getPermissionsAsync(writeOnly));\n\n        case 5:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 6:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function presentPermissionsPickerAsync() {\n  return _regeneratorRuntime.async(function presentPermissionsPickerAsync$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (MediaLibrary.presentPermissionsPickerAsync) {\n            _context3.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'presentPermissionsPickerAsync');\n\n        case 2:\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(MediaLibrary.presentPermissionsPickerAsync());\n\n        case 4:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function createAssetAsync(localUri) {\n  var asset;\n  return _regeneratorRuntime.async(function createAssetAsync$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          if (MediaLibrary.createAssetAsync) {\n            _context4.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'createAssetAsync');\n\n        case 2:\n          if (!(!localUri || typeof localUri !== 'string')) {\n            _context4.next = 4;\n            break;\n          }\n\n          throw new Error('Invalid argument \"localUri\". It must be a string!');\n\n        case 4:\n          _context4.next = 6;\n          return _regeneratorRuntime.awrap(MediaLibrary.createAssetAsync(localUri));\n\n        case 6:\n          asset = _context4.sent;\n\n          if (!Array.isArray(asset)) {\n            _context4.next = 9;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", asset[0]);\n\n        case 9:\n          return _context4.abrupt(\"return\", asset);\n\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function saveToLibraryAsync(localUri) {\n  return _regeneratorRuntime.async(function saveToLibraryAsync$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          if (MediaLibrary.saveToLibraryAsync) {\n            _context5.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'saveToLibraryAsync');\n\n        case 2:\n          _context5.next = 4;\n          return _regeneratorRuntime.awrap(MediaLibrary.saveToLibraryAsync(localUri));\n\n        case 4:\n          return _context5.abrupt(\"return\", _context5.sent);\n\n        case 5:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function addAssetsToAlbumAsync(assets, album) {\n  var copy,\n      assetIds,\n      albumId,\n      _args6 = arguments;\n  return _regeneratorRuntime.async(function addAssetsToAlbumAsync$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          copy = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : true;\n\n          if (MediaLibrary.addAssetsToAlbumAsync) {\n            _context6.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'addAssetsToAlbumAsync');\n\n        case 3:\n          assetIds = arrayize(assets).map(getId);\n          albumId = getId(album);\n          checkAssetIds(assetIds);\n\n          if (!(!albumId || typeof albumId !== 'string')) {\n            _context6.next = 8;\n            break;\n          }\n\n          throw new Error('Invalid album ID. It must be a string!');\n\n        case 8:\n          if (!(Platform.OS === 'ios')) {\n            _context6.next = 12;\n            break;\n          }\n\n          _context6.next = 11;\n          return _regeneratorRuntime.awrap(MediaLibrary.addAssetsToAlbumAsync(assetIds, albumId));\n\n        case 11:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 12:\n          _context6.next = 14;\n          return _regeneratorRuntime.awrap(MediaLibrary.addAssetsToAlbumAsync(assetIds, albumId, !!copy));\n\n        case 14:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 15:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function removeAssetsFromAlbumAsync(assets, album) {\n  var assetIds, albumId;\n  return _regeneratorRuntime.async(function removeAssetsFromAlbumAsync$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          if (MediaLibrary.removeAssetsFromAlbumAsync) {\n            _context7.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'removeAssetsFromAlbumAsync');\n\n        case 2:\n          assetIds = arrayize(assets).map(getId);\n          albumId = getId(album);\n          checkAssetIds(assetIds);\n          _context7.next = 7;\n          return _regeneratorRuntime.awrap(MediaLibrary.removeAssetsFromAlbumAsync(assetIds, albumId));\n\n        case 7:\n          return _context7.abrupt(\"return\", _context7.sent);\n\n        case 8:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function deleteAssetsAsync(assets) {\n  var assetIds;\n  return _regeneratorRuntime.async(function deleteAssetsAsync$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          if (MediaLibrary.deleteAssetsAsync) {\n            _context8.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'deleteAssetsAsync');\n\n        case 2:\n          assetIds = arrayize(assets).map(getId);\n          checkAssetIds(assetIds);\n          _context8.next = 6;\n          return _regeneratorRuntime.awrap(MediaLibrary.deleteAssetsAsync(assetIds));\n\n        case 6:\n          return _context8.abrupt(\"return\", _context8.sent);\n\n        case 7:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getAssetInfoAsync(asset) {\n  var options,\n      assetId,\n      assetInfo,\n      _args9 = arguments;\n  return _regeneratorRuntime.async(function getAssetInfoAsync$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          options = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : {\n            shouldDownloadFromNetwork: true\n          };\n\n          if (MediaLibrary.getAssetInfoAsync) {\n            _context9.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'getAssetInfoAsync');\n\n        case 3:\n          assetId = getId(asset);\n          checkAssetIds([assetId]);\n          _context9.next = 7;\n          return _regeneratorRuntime.awrap(MediaLibrary.getAssetInfoAsync(assetId, options));\n\n        case 7:\n          assetInfo = _context9.sent;\n\n          if (!Array.isArray(assetInfo)) {\n            _context9.next = 10;\n            break;\n          }\n\n          return _context9.abrupt(\"return\", assetInfo[0]);\n\n        case 10:\n          return _context9.abrupt(\"return\", assetInfo);\n\n        case 11:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getAlbumsAsync() {\n  var _ref,\n      _ref$includeSmartAlbu,\n      includeSmartAlbums,\n      _args10 = arguments;\n\n  return _regeneratorRuntime.async(function getAlbumsAsync$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _ref = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {}, _ref$includeSmartAlbu = _ref.includeSmartAlbums, includeSmartAlbums = _ref$includeSmartAlbu === void 0 ? false : _ref$includeSmartAlbu;\n\n          if (MediaLibrary.getAlbumsAsync) {\n            _context10.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'getAlbumsAsync');\n\n        case 3:\n          _context10.next = 5;\n          return _regeneratorRuntime.awrap(MediaLibrary.getAlbumsAsync({\n            includeSmartAlbums: includeSmartAlbums\n          }));\n\n        case 5:\n          return _context10.abrupt(\"return\", _context10.sent);\n\n        case 6:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getAlbumAsync(title) {\n  return _regeneratorRuntime.async(function getAlbumAsync$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          if (MediaLibrary.getAlbumAsync) {\n            _context11.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'getAlbumAsync');\n\n        case 2:\n          if (!(typeof title !== 'string')) {\n            _context11.next = 4;\n            break;\n          }\n\n          throw new Error('Album title must be a string!');\n\n        case 4:\n          _context11.next = 6;\n          return _regeneratorRuntime.awrap(MediaLibrary.getAlbumAsync(title));\n\n        case 6:\n          return _context11.abrupt(\"return\", _context11.sent);\n\n        case 7:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function createAlbumAsync(albumName, asset) {\n  var copyAsset,\n      assetId,\n      _args12 = arguments;\n  return _regeneratorRuntime.async(function createAlbumAsync$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          copyAsset = _args12.length > 2 && _args12[2] !== undefined ? _args12[2] : true;\n\n          if (MediaLibrary.createAlbumAsync) {\n            _context12.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'createAlbumAsync');\n\n        case 3:\n          assetId = getId(asset);\n\n          if (!(Platform.OS === 'android' && (typeof assetId !== 'string' || assetId.length === 0))) {\n            _context12.next = 6;\n            break;\n          }\n\n          throw new Error('MediaLibrary.createAlbumAsync must be called with an asset on Android.');\n\n        case 6:\n          if (!(!albumName || typeof albumName !== 'string')) {\n            _context12.next = 8;\n            break;\n          }\n\n          throw new Error('Invalid argument \"albumName\". It must be a string!');\n\n        case 8:\n          if (!(assetId != null && typeof assetId !== 'string')) {\n            _context12.next = 10;\n            break;\n          }\n\n          throw new Error('Asset ID must be a string!');\n\n        case 10:\n          if (!(Platform.OS === 'ios')) {\n            _context12.next = 14;\n            break;\n          }\n\n          _context12.next = 13;\n          return _regeneratorRuntime.awrap(MediaLibrary.createAlbumAsync(albumName, assetId));\n\n        case 13:\n          return _context12.abrupt(\"return\", _context12.sent);\n\n        case 14:\n          _context12.next = 16;\n          return _regeneratorRuntime.awrap(MediaLibrary.createAlbumAsync(albumName, assetId, !!copyAsset));\n\n        case 16:\n          return _context12.abrupt(\"return\", _context12.sent);\n\n        case 17:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function deleteAlbumsAsync(albums) {\n  var assetRemove,\n      albumIds,\n      _args13 = arguments;\n  return _regeneratorRuntime.async(function deleteAlbumsAsync$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          assetRemove = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : false;\n\n          if (MediaLibrary.deleteAlbumsAsync) {\n            _context13.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'deleteAlbumsAsync');\n\n        case 3:\n          albumIds = arrayize(albums).map(getId);\n          checkAlbumIds(albumIds);\n\n          if (!(Platform.OS === 'android')) {\n            _context13.next = 9;\n            break;\n          }\n\n          _context13.next = 8;\n          return _regeneratorRuntime.awrap(MediaLibrary.deleteAlbumsAsync(albumIds));\n\n        case 8:\n          return _context13.abrupt(\"return\", _context13.sent);\n\n        case 9:\n          _context13.next = 11;\n          return _regeneratorRuntime.awrap(MediaLibrary.deleteAlbumsAsync(albumIds, !!assetRemove));\n\n        case 11:\n          return _context13.abrupt(\"return\", _context13.sent);\n\n        case 12:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getAssetsAsync() {\n  var assetsOptions,\n      first,\n      after,\n      album,\n      sortBy,\n      mediaType,\n      createdAfter,\n      createdBefore,\n      options,\n      _args14 = arguments;\n  return _regeneratorRuntime.async(function getAssetsAsync$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          assetsOptions = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : {};\n\n          if (MediaLibrary.getAssetsAsync) {\n            _context14.next = 3;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'getAssetsAsync');\n\n        case 3:\n          first = assetsOptions.first, after = assetsOptions.after, album = assetsOptions.album, sortBy = assetsOptions.sortBy, mediaType = assetsOptions.mediaType, createdAfter = assetsOptions.createdAfter, createdBefore = assetsOptions.createdBefore;\n          options = {\n            first: first == null ? 20 : first,\n            after: getId(after),\n            album: getId(album),\n            sortBy: arrayize(sortBy),\n            mediaType: arrayize(mediaType || [MediaType.photo]),\n            createdAfter: dateToNumber(createdAfter),\n            createdBefore: dateToNumber(createdBefore)\n          };\n\n          if (!(first != null && typeof options.first !== 'number')) {\n            _context14.next = 7;\n            break;\n          }\n\n          throw new Error('Option \"first\" must be a number!');\n\n        case 7:\n          if (!(after != null && typeof options.after !== 'string')) {\n            _context14.next = 9;\n            break;\n          }\n\n          throw new Error('Option \"after\" must be a string!');\n\n        case 9:\n          if (!(album != null && typeof options.album !== 'string')) {\n            _context14.next = 11;\n            break;\n          }\n\n          throw new Error('Option \"album\" must be a string!');\n\n        case 11:\n          if (!(after != null && Platform.OS === 'android' && isNaN(parseInt(getId(after), 10)))) {\n            _context14.next = 13;\n            break;\n          }\n\n          throw new Error('Option \"after\" must be a valid ID!');\n\n        case 13:\n          if (!(first != null && first < 0)) {\n            _context14.next = 15;\n            break;\n          }\n\n          throw new Error('Option \"first\" must be a positive integer!');\n\n        case 15:\n          options.sortBy.forEach(checkSortBy);\n          options.mediaType.forEach(checkMediaType);\n          _context14.next = 19;\n          return _regeneratorRuntime.awrap(MediaLibrary.getAssetsAsync(options));\n\n        case 19:\n          return _context14.abrupt(\"return\", _context14.sent);\n\n        case 20:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function addListener(listener) {\n  var subscription = eventEmitter.addListener(MediaLibrary.CHANGE_LISTENER_NAME, listener);\n  return subscription;\n}\nexport function removeSubscription(subscription) {\n  subscription.remove();\n}\nexport function removeAllListeners() {\n  eventEmitter.removeAllListeners(MediaLibrary.CHANGE_LISTENER_NAME);\n}\nexport function getMomentsAsync() {\n  return _regeneratorRuntime.async(function getMomentsAsync$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          if (MediaLibrary.getMomentsAsync) {\n            _context15.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('MediaLibrary', 'getMomentsAsync');\n\n        case 2:\n          _context15.next = 4;\n          return _regeneratorRuntime.awrap(MediaLibrary.getMomentsAsync());\n\n        case 4:\n          return _context15.abrupt(\"return\", _context15.sent);\n\n        case 5:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function migrateAlbumIfNeededAsync(album) {\n  return _regeneratorRuntime.async(function migrateAlbumIfNeededAsync$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          if (MediaLibrary.migrateAlbumIfNeededAsync) {\n            _context16.next = 2;\n            break;\n          }\n\n          return _context16.abrupt(\"return\");\n\n        case 2:\n          _context16.next = 4;\n          return _regeneratorRuntime.awrap(MediaLibrary.migrateAlbumIfNeededAsync(getId(album)));\n\n        case 4:\n          return _context16.abrupt(\"return\", _context16.sent);\n\n        case 5:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function albumNeedsMigrationAsync(album) {\n  return _regeneratorRuntime.async(function albumNeedsMigrationAsync$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          if (MediaLibrary.albumNeedsMigrationAsync) {\n            _context17.next = 2;\n            break;\n          }\n\n          return _context17.abrupt(\"return\", false);\n\n        case 2:\n          _context17.next = 4;\n          return _regeneratorRuntime.awrap(MediaLibrary.albumNeedsMigrationAsync(getId(album)));\n\n        case 4:\n          return _context17.abrupt(\"return\", _context17.sent);\n\n        case 5:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}","map":{"version":3,"sources":["../src/MediaLibrary.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventEmitter, Subscription, UnavailabilityError } from '@unimodules/core';\nimport {\n  PermissionResponse as EXPermissionResponse,\n  PermissionStatus,\n  PermissionExpiration,\n} from 'expo-modules-core';\nimport { Platform } from 'react-native';\n\nimport MediaLibrary from './ExponentMediaLibrary';\n\nconst eventEmitter = new EventEmitter(MediaLibrary);\n\nexport type PermissionResponse = EXPermissionResponse & {\n  // iOS only\n  accessPrivileges?: 'all' | 'limited' | 'none';\n};\n\nexport type MediaTypeValue = 'audio' | 'photo' | 'video' | 'unknown';\nexport type SortByKey =\n  | 'default'\n  | 'mediaType'\n  | 'width'\n  | 'height'\n  | 'creationTime'\n  | 'modificationTime'\n  | 'duration';\nexport type SortByValue = [SortByKey, boolean] | SortByKey;\n\nexport type MediaTypeObject = {\n  audio: 'audio';\n  photo: 'photo';\n  video: 'video';\n  unknown: 'unknown';\n};\n\nexport type SortByObject = {\n  default: 'default';\n  mediaType: 'mediaType';\n  width: 'width';\n  height: 'height';\n  creationTime: 'creationTime';\n  modificationTime: 'modificationTime';\n  duration: 'duration';\n};\n\nexport type Asset = {\n  id: string;\n  filename: string;\n  uri: string;\n  mediaType: MediaTypeValue;\n  mediaSubtypes?: string[]; // iOS only\n  width: number;\n  height: number;\n  creationTime: number;\n  modificationTime: number;\n  duration: number;\n  albumId?: string; // Android only\n};\n\nexport type AssetInfo = Asset & {\n  localUri?: string;\n  location?: Location;\n  exif?: object;\n  isFavorite?: boolean; //iOS only\n  isNetworkAsset?: boolean; //iOS only\n};\n\nexport type MediaLibraryAssetInfoQueryOptions = {\n  shouldDownloadFromNetwork?: boolean;\n};\n\nexport type MediaLibraryAssetsChangeEvent =\n  | {\n      hasIncrementalChanges: false;\n    }\n  | {\n      hasIncrementalChanges: true;\n      insertedAssets: Asset[];\n      deletedAssets: Asset[];\n      updatedAssets: Asset[];\n    };\n\nexport type Location = {\n  latitude: number;\n  longitude: number;\n};\n\nexport type Album = {\n  id: string;\n  title: string;\n  assetCount: number;\n  type?: string; // iOS only\n\n  // iOS moments only\n  startTime: number;\n  endTime: number;\n  approximateLocation?: Location;\n  locationNames?: string[];\n};\n\nexport type AlbumsOptions = {\n  // iOS only\n  includeSmartAlbums?: boolean;\n};\n\nexport type AssetsOptions = {\n  first?: number;\n  after?: AssetRef;\n  album?: AlbumRef;\n  sortBy?: SortByValue[] | SortByValue;\n  mediaType?: MediaTypeValue[] | MediaTypeValue;\n  createdAfter?: Date | number;\n  createdBefore?: Date | number;\n};\n\nexport type PagedInfo<T> = {\n  assets: T[];\n  endCursor: string;\n  hasNextPage: boolean;\n  totalCount: number;\n};\n\nexport type AssetRef = Asset | string;\nexport type AlbumRef = Album | string;\n\nexport { PermissionStatus, PermissionExpiration };\n\nfunction arrayize(item: any): any[] {\n  if (Array.isArray(item)) {\n    return item;\n  }\n  return item ? [item] : [];\n}\n\nfunction getId(ref: any): string | undefined {\n  if (typeof ref === 'string') {\n    return ref;\n  }\n  return ref ? ref.id : undefined;\n}\n\nfunction checkAssetIds(assetIds: any): void {\n  if (assetIds.some(id => !id || typeof id !== 'string')) {\n    throw new Error('Asset ID must be a string!');\n  }\n}\n\nfunction checkAlbumIds(albumIds: any): void {\n  if (albumIds.some(id => !id || typeof id !== 'string')) {\n    throw new Error('Album ID must be a string!');\n  }\n}\n\nfunction checkMediaType(mediaType: any): void {\n  if (Object.values(MediaType).indexOf(mediaType) === -1) {\n    throw new Error(`Invalid mediaType: ${mediaType}`);\n  }\n}\n\nfunction checkSortBy(sortBy: any): void {\n  if (Array.isArray(sortBy)) {\n    checkSortByKey(sortBy[0]);\n\n    if (typeof sortBy[1] !== 'boolean') {\n      throw new Error('Invalid sortBy array argument. Second item must be a boolean!');\n    }\n  } else {\n    checkSortByKey(sortBy);\n  }\n}\n\nfunction checkSortByKey(sortBy: any): void {\n  if (Object.values(SortBy).indexOf(sortBy) === -1) {\n    throw new Error(`Invalid sortBy key: ${sortBy}`);\n  }\n}\n\nfunction dateToNumber(value?: Date | number): number | undefined {\n  return value instanceof Date ? value.getTime() : value;\n}\n\n// export constants\nexport const MediaType: MediaTypeObject = MediaLibrary.MediaType;\nexport const SortBy: SortByObject = MediaLibrary.SortBy;\n\nexport async function requestPermissionsAsync(\n  writeOnly: boolean = false\n): Promise<PermissionResponse> {\n  if (!MediaLibrary.requestPermissionsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'requestPermissionsAsync');\n  }\n  return await MediaLibrary.requestPermissionsAsync(writeOnly);\n}\n\nexport async function getPermissionsAsync(writeOnly: boolean = false): Promise<PermissionResponse> {\n  if (!MediaLibrary.getPermissionsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'getPermissionsAsync');\n  }\n  return await MediaLibrary.getPermissionsAsync(writeOnly);\n}\n\n/**\n * @iOS-only\n * @throws Will throw an error if called on platform that doesn't support this functionality (eg. iOS < 14, Android, etc.).\n */\nexport async function presentPermissionsPickerAsync(): Promise<void> {\n  if (!MediaLibrary.presentPermissionsPickerAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'presentPermissionsPickerAsync');\n  }\n  return await MediaLibrary.presentPermissionsPickerAsync();\n}\n\nexport async function createAssetAsync(localUri: string): Promise<Asset> {\n  if (!MediaLibrary.createAssetAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'createAssetAsync');\n  }\n\n  if (!localUri || typeof localUri !== 'string') {\n    throw new Error('Invalid argument \"localUri\". It must be a string!');\n  }\n  const asset = await MediaLibrary.createAssetAsync(localUri);\n\n  if (Array.isArray(asset)) {\n    // Android returns an array with asset, we need to pick the first item\n    return asset[0];\n  }\n  return asset;\n}\n\nexport async function saveToLibraryAsync(localUri: string): Promise<void> {\n  if (!MediaLibrary.saveToLibraryAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'saveToLibraryAsync');\n  }\n  return await MediaLibrary.saveToLibraryAsync(localUri);\n}\n\nexport async function addAssetsToAlbumAsync(\n  assets: AssetRef[] | AssetRef,\n  album: AlbumRef,\n  copy: boolean = true\n) {\n  if (!MediaLibrary.addAssetsToAlbumAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'addAssetsToAlbumAsync');\n  }\n\n  const assetIds = arrayize(assets).map(getId);\n  const albumId = getId(album);\n\n  checkAssetIds(assetIds);\n\n  if (!albumId || typeof albumId !== 'string') {\n    throw new Error('Invalid album ID. It must be a string!');\n  }\n\n  if (Platform.OS === 'ios') {\n    return await MediaLibrary.addAssetsToAlbumAsync(assetIds, albumId);\n  }\n  return await MediaLibrary.addAssetsToAlbumAsync(assetIds, albumId, !!copy);\n}\n\nexport async function removeAssetsFromAlbumAsync(assets: AssetRef[] | AssetRef, album: AlbumRef) {\n  if (!MediaLibrary.removeAssetsFromAlbumAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'removeAssetsFromAlbumAsync');\n  }\n\n  const assetIds = arrayize(assets).map(getId);\n  const albumId = getId(album);\n\n  checkAssetIds(assetIds);\n  return await MediaLibrary.removeAssetsFromAlbumAsync(assetIds, albumId);\n}\n\nexport async function deleteAssetsAsync(assets: AssetRef[] | AssetRef) {\n  if (!MediaLibrary.deleteAssetsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'deleteAssetsAsync');\n  }\n\n  const assetIds = arrayize(assets).map(getId);\n\n  checkAssetIds(assetIds);\n  return await MediaLibrary.deleteAssetsAsync(assetIds);\n}\n\nexport async function getAssetInfoAsync(\n  asset: AssetRef,\n  options: MediaLibraryAssetInfoQueryOptions = { shouldDownloadFromNetwork: true }\n): Promise<AssetInfo> {\n  if (!MediaLibrary.getAssetInfoAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'getAssetInfoAsync');\n  }\n\n  const assetId = getId(asset);\n\n  checkAssetIds([assetId]);\n\n  const assetInfo = await MediaLibrary.getAssetInfoAsync(assetId, options);\n\n  if (Array.isArray(assetInfo)) {\n    // Android returns an array with asset info, we need to pick the first item\n    return assetInfo[0];\n  }\n  return assetInfo;\n}\n\nexport async function getAlbumsAsync({ includeSmartAlbums = false }: AlbumsOptions = {}): Promise<\n  Album[]\n> {\n  if (!MediaLibrary.getAlbumsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'getAlbumsAsync');\n  }\n  return await MediaLibrary.getAlbumsAsync({ includeSmartAlbums });\n}\n\nexport async function getAlbumAsync(title: string): Promise<Album> {\n  if (!MediaLibrary.getAlbumAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'getAlbumAsync');\n  }\n  if (typeof title !== 'string') {\n    throw new Error('Album title must be a string!');\n  }\n  return await MediaLibrary.getAlbumAsync(title);\n}\n\nexport async function createAlbumAsync(\n  albumName: string,\n  asset?: AssetRef,\n  copyAsset: boolean = true\n): Promise<Album> {\n  if (!MediaLibrary.createAlbumAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'createAlbumAsync');\n  }\n\n  const assetId = getId(asset);\n\n  if (Platform.OS === 'android' && (typeof assetId !== 'string' || assetId.length === 0)) {\n    // it's not possible to create empty album on Android, so initial asset must be provided\n    throw new Error('MediaLibrary.createAlbumAsync must be called with an asset on Android.');\n  }\n  if (!albumName || typeof albumName !== 'string') {\n    throw new Error('Invalid argument \"albumName\". It must be a string!');\n  }\n  if (assetId != null && typeof assetId !== 'string') {\n    throw new Error('Asset ID must be a string!');\n  }\n\n  if (Platform.OS === 'ios') {\n    return await MediaLibrary.createAlbumAsync(albumName, assetId);\n  }\n  return await MediaLibrary.createAlbumAsync(albumName, assetId, !!copyAsset);\n}\n\nexport async function deleteAlbumsAsync(\n  albums: AlbumRef[] | AlbumRef,\n  assetRemove: boolean = false\n) {\n  if (!MediaLibrary.deleteAlbumsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'deleteAlbumsAsync');\n  }\n\n  const albumIds = arrayize(albums).map(getId);\n\n  checkAlbumIds(albumIds);\n  if (Platform.OS === 'android') {\n    return await MediaLibrary.deleteAlbumsAsync(albumIds);\n  }\n  return await MediaLibrary.deleteAlbumsAsync(albumIds, !!assetRemove);\n}\n\nexport async function getAssetsAsync(assetsOptions: AssetsOptions = {}): Promise<PagedInfo<Asset>> {\n  if (!MediaLibrary.getAssetsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'getAssetsAsync');\n  }\n\n  const { first, after, album, sortBy, mediaType, createdAfter, createdBefore } = assetsOptions;\n\n  const options = {\n    first: first == null ? 20 : first,\n    after: getId(after),\n    album: getId(album),\n    sortBy: arrayize(sortBy),\n    mediaType: arrayize(mediaType || [MediaType.photo]),\n    createdAfter: dateToNumber(createdAfter),\n    createdBefore: dateToNumber(createdBefore),\n  };\n\n  if (first != null && typeof options.first !== 'number') {\n    throw new Error('Option \"first\" must be a number!');\n  }\n  if (after != null && typeof options.after !== 'string') {\n    throw new Error('Option \"after\" must be a string!');\n  }\n  if (album != null && typeof options.album !== 'string') {\n    throw new Error('Option \"album\" must be a string!');\n  }\n\n  if (after != null && Platform.OS === 'android' && isNaN(parseInt(getId(after) as string, 10))) {\n    throw new Error('Option \"after\" must be a valid ID!');\n  }\n\n  if (first != null && first < 0) {\n    throw new Error('Option \"first\" must be a positive integer!');\n  }\n\n  options.sortBy.forEach(checkSortBy);\n  options.mediaType.forEach(checkMediaType);\n\n  return await MediaLibrary.getAssetsAsync(options);\n}\n\nexport function addListener(\n  listener: (event: MediaLibraryAssetsChangeEvent) => void\n): Subscription {\n  const subscription = eventEmitter.addListener(MediaLibrary.CHANGE_LISTENER_NAME, listener);\n  return subscription;\n}\n\nexport function removeSubscription(subscription: Subscription): void {\n  subscription.remove();\n}\n\nexport function removeAllListeners(): void {\n  eventEmitter.removeAllListeners(MediaLibrary.CHANGE_LISTENER_NAME);\n}\n\n// iOS only\nexport async function getMomentsAsync() {\n  if (!MediaLibrary.getMomentsAsync) {\n    throw new UnavailabilityError('MediaLibrary', 'getMomentsAsync');\n  }\n\n  return await MediaLibrary.getMomentsAsync();\n}\n\n// Android only\n/**\n * Moves content of provided album to the special media directories on **Android R** or **above** if needed.\n *\n * This method won't do anything if:\n * - app is running on **iOS**, **web** or **Android below R**\n * - app has **write permission** to the album folder\n *\n * The migration is possible when the album contains only compatible files types.\n * For instance, movies and pictures are compatible with each other, but music and pictures are not.\n * If automatic migration isn't possible, the function will be rejected.\n * In that case, you can use methods from the `expo-file-system` to migrate all your files manually.\n *\n * @param album\n */\nexport async function migrateAlbumIfNeededAsync(album: AlbumRef): Promise<void> {\n  if (!MediaLibrary.migrateAlbumIfNeededAsync) {\n    return;\n  }\n\n  return await MediaLibrary.migrateAlbumIfNeededAsync(getId(album));\n}\n\n// Android only\n/**\n * Checks if provided album should be migrated.\n * In other words, it checks if the application has the write permission to the album folder.\n *\n * This method always returns **false** for all android versions **below Android R**, **iOS** or **web**.\n *\n * @param album\n */\nexport async function albumNeedsMigrationAsync(album: AlbumRef): Promise<boolean> {\n  if (!MediaLibrary.albumNeedsMigrationAsync) {\n    return false;\n  }\n\n  return await MediaLibrary.albumNeedsMigrationAsync(getId(album));\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}